{{if .}}
<table class="table table-hover align-middle mb-0">
    <thead>
        <tr>
            <th>Status</th>
            <th>Service</th>
            <th>PID</th>
            <th>Address</th>
            <th class="text-end">Actions</th>
        </tr>
    </thead>
    <tbody>
        {{range .}}
        <tr>
            <td><span class="badge bg-success pulse-dot">Live</span></td>
            <td class="fw-semibold">{{.Name}}</td>
            <td><code>{{.PID}}</code></td>
            <td><code>{{.Address}}</code></td>
            <td class="text-end">
                <div class="btn-group btn-group-sm" role="group">
                    <a href="http://localhost:{{.Port}}" target="_blank" class="btn btn-outline-primary" title="Open in browser">
                        Open :{{.Port}}
                    </a>
                    <button class="btn btn-outline-warning"
                            title="Restart process"
                            hx-post="/restart?pid={{.PID}}"
                            hx-target="#service-list"
                            hx-swap="innerHTML settle:200ms"
                            hx-confirm="Restart {{.Name}} (PID {{.PID}}) on port {{.Port}}?"
                            hx-indicator="#loading-{{.PID}}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2z"/>
                            <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466"/>
                        </svg>
                    </button>
                    <button class="btn btn-outline-danger"
                            title="Stop process"
                            hx-post="/stop?pid={{.PID}}"
                            hx-target="#service-list"
                            hx-swap="innerHTML settle:200ms"
                            hx-confirm="Stop {{.Name}} (PID {{.PID}}) on port {{.Port}}?"
                            hx-indicator="#loading-{{.PID}}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5"/>
                        </svg>
                    </button>
                </div>
                <span class="htmx-indicator ms-2" id="loading-{{.PID}}">
                    <span class="spinner-border spinner-border-sm text-secondary"></span>
                </span>
            </td>
        </tr>
        {{end}}
    </tbody>
</table>
{{else}}
<div class="text-center text-muted py-5">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="bi bi-plug mb-3 opacity-50" viewBox="0 0 16 16">
        <path d="M6 0a.5.5 0 0 1 .5.5V3h3V.5a.5.5 0 0 1 1 0V3h1a.5.5 0 0 1 .5.5v3A3.5 3.5 0 0 1 8.5 10c-.002.434-.01.845-.04 1.22-.041.514-.126 1.003-.317 1.424a2.083 2.083 0 0 1-.97 1.028C6.725 13.9 6.169 14 5.5 14c-.998 0-1.61.33-1.974.718A1.922 1.922 0 0 0 3 15.5a.5.5 0 0 1-1 0c0-.643.292-1.401.856-1.983C3.41 12.935 4.248 12.5 5.5 12.5c.56 0 .954-.084 1.235-.228.278-.142.46-.36.587-.673.127-.312.198-.72.234-1.177.025-.323.035-.667.038-1.022A3.5 3.5 0 0 1 4 6.5v-3a.5.5 0 0 1 .5-.5h1V.5A.5.5 0 0 1 6 0"/>
    </svg>
    <p class="mb-0">No services detected on ports 8000-9999</p>
</div>
{{end}}
